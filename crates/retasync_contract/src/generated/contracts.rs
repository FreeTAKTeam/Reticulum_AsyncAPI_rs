// Generated by cargo xtask codegen. Do not edit manually.

use async_trait::async_trait;
use serde::{Deserialize, Serialize};

#[derive(Debug, Clone, Serialize, Deserialize, PartialEq, Eq)]
#[serde(rename_all = "snake_case")]
pub enum CommandOperation {
    EmergencyActionMessageCreate,
    EmergencyActionMessageList,
    EmergencyActionMessagePut,
    EmergencyActionMessageRetrieve,
    EmergencyActionMessageDelete,
    EventCreate,
    EventList,
    EventPut,
    EventRetrieve,
    EventDelete,
    TransferUpload,
}

#[derive(Debug, Clone, Serialize, Deserialize, PartialEq, Eq)]
#[serde(rename_all = "snake_case")]
pub enum EventOperation {
    EmergencyActionMessageCreated,
    EmergencyActionMessageUpdated,
    EmergencyActionMessageDeleted,
    EventCreated,
    EventUpdated,
    EventDeleted,
    TransferProgress,
    TransferCompleted,
    TransferFailed,
}

#[async_trait]
pub trait CommandDispatch {
    async fn emergency_action_message_create(&self, payload: EmergencyActionMessageCreatePayload) -> anyhow::Result<serde_json::Value>;
    async fn emergency_action_message_list(&self, payload: EmergencyActionMessageListPayload) -> anyhow::Result<serde_json::Value>;
    async fn emergency_action_message_put(&self, payload: EmergencyActionMessagePutPayload) -> anyhow::Result<serde_json::Value>;
    async fn emergency_action_message_retrieve(&self, payload: EmergencyActionMessageRetrievePayload) -> anyhow::Result<serde_json::Value>;
    async fn emergency_action_message_delete(&self, payload: EmergencyActionMessageDeletePayload) -> anyhow::Result<serde_json::Value>;
    async fn event_create(&self, payload: EventCreatePayload) -> anyhow::Result<serde_json::Value>;
    async fn event_list(&self, payload: EventListPayload) -> anyhow::Result<serde_json::Value>;
    async fn event_put(&self, payload: EventPutPayload) -> anyhow::Result<serde_json::Value>;
    async fn event_retrieve(&self, payload: EventRetrievePayload) -> anyhow::Result<serde_json::Value>;
    async fn event_delete(&self, payload: EventDeletePayload) -> anyhow::Result<serde_json::Value>;
    async fn transfer_upload(&self, payload: TransferUploadPayload) -> anyhow::Result<serde_json::Value>;
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct EmergencyActionMessageCreatePayload {
    pub body: serde_json::Value,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct EmergencyActionMessageListPayload {
    pub body: serde_json::Value,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct EmergencyActionMessagePutPayload {
    pub body: serde_json::Value,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct EmergencyActionMessageRetrievePayload {
    pub body: serde_json::Value,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct EmergencyActionMessageDeletePayload {
    pub body: serde_json::Value,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct EventCreatePayload {
    pub body: serde_json::Value,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct EventListPayload {
    pub body: serde_json::Value,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct EventPutPayload {
    pub body: serde_json::Value,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct EventRetrievePayload {
    pub body: serde_json::Value,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct EventDeletePayload {
    pub body: serde_json::Value,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct TransferUploadPayload {
    pub body: serde_json::Value,
}

#[async_trait]
pub trait MeshClientBackend {
    async fn send_command(&self, operation: &str, payload: serde_json::Value) -> anyhow::Result<serde_json::Value>;
}

pub struct MeshClient<B> {
    backend: B,
}

impl<B> MeshClient<B> {
    pub fn new(backend: B) -> Self {
        Self { backend }
    }
}

impl<B> MeshClient<B>
where
    B: MeshClientBackend + Send + Sync,
{
    pub async fn call_emergency_action_message_create(&self, payload: EmergencyActionMessageCreatePayload) -> anyhow::Result<serde_json::Value> {
        self.backend.send_command("emergency_action_message.create", payload.body).await
    }

    pub async fn call_emergency_action_message_list(&self, payload: EmergencyActionMessageListPayload) -> anyhow::Result<serde_json::Value> {
        self.backend.send_command("emergency_action_message.list", payload.body).await
    }

    pub async fn call_emergency_action_message_put(&self, payload: EmergencyActionMessagePutPayload) -> anyhow::Result<serde_json::Value> {
        self.backend.send_command("emergency_action_message.put", payload.body).await
    }

    pub async fn call_emergency_action_message_retrieve(&self, payload: EmergencyActionMessageRetrievePayload) -> anyhow::Result<serde_json::Value> {
        self.backend.send_command("emergency_action_message.retrieve", payload.body).await
    }

    pub async fn call_emergency_action_message_delete(&self, payload: EmergencyActionMessageDeletePayload) -> anyhow::Result<serde_json::Value> {
        self.backend.send_command("emergency_action_message.delete", payload.body).await
    }

    pub async fn call_event_create(&self, payload: EventCreatePayload) -> anyhow::Result<serde_json::Value> {
        self.backend.send_command("event.create", payload.body).await
    }

    pub async fn call_event_list(&self, payload: EventListPayload) -> anyhow::Result<serde_json::Value> {
        self.backend.send_command("event.list", payload.body).await
    }

    pub async fn call_event_put(&self, payload: EventPutPayload) -> anyhow::Result<serde_json::Value> {
        self.backend.send_command("event.put", payload.body).await
    }

    pub async fn call_event_retrieve(&self, payload: EventRetrievePayload) -> anyhow::Result<serde_json::Value> {
        self.backend.send_command("event.retrieve", payload.body).await
    }

    pub async fn call_event_delete(&self, payload: EventDeletePayload) -> anyhow::Result<serde_json::Value> {
        self.backend.send_command("event.delete", payload.body).await
    }

    pub async fn call_transfer_upload(&self, payload: TransferUploadPayload) -> anyhow::Result<serde_json::Value> {
        self.backend.send_command("transfer.upload", payload.body).await
    }

}
